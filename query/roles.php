<?php$config=parse_ini_file(__DIR__."/../jsheetconfig.ini");require_once($_SERVER['DOCUMENT_ROOT'].$config['appRoot']."/query/genFunc.php");function fetchAllRoles($con){  $dataList=array();  $query="SELECT * FROM roles WHERE 1=1 AND id NOT IN (42)";  $stmt=mysqli_prepare($con,$query);  mysqli_stmt_execute($stmt);  $result = mysqli_stmt_get_result($stmt);  while($row=$result->fetch_assoc()){    $dataList[]=$row;  }  mysqli_stmt_close($stmt);  return $dataList;}function fetchRoleById($con,$roleId){  $query="SELECT * FROM roles WHERE id=?";  $stmt=mysqli_prepare($con,$query);  mysqli_stmt_bind_param($stmt,'i',$roleId);  mysqli_stmt_execute($stmt);  $result = mysqli_stmt_get_result($stmt);  $row=$result->fetch_assoc();  mysqli_stmt_close($stmt);  return $row;}function fetchAllModules($con){  $dataList=array();  $query="SELECT * FROM modules WHERE 1=1 ORDER BY id";  $stmt=mysqli_prepare($con,$query);  mysqli_stmt_execute($stmt);  $result = mysqli_stmt_get_result($stmt);  while($row=$result->fetch_assoc()){    $dataList[]=$row;  }  mysqli_stmt_close($stmt);  return $dataList;}function fetchRoleModulesByRoleId($con,$roleId){  $dataList=array();  $query="SELECT * FROM rolemodules WHERE roleId=? ORDER BY id";  $stmt=mysqli_prepare($con,$query);  mysqli_stmt_bind_param($stmt,'i',$roleId);  mysqli_stmt_execute($stmt);  $result = mysqli_stmt_get_result($stmt);  while($row=$result->fetch_assoc()){    $dataList[]=$row;  }    mysqli_stmt_close($stmt);    return $dataList;}function fetchLoanDetails($con,$sid){  $dataList=array();  $query="SELECT * FROM `staffloan` WHERE sid=?";  $stmt=mysqli_prepare($con,$query);  mysqli_stmt_bind_param($stmt,'i',$sid);  mysqli_stmt_execute($stmt);  $result = mysqli_stmt_get_result($stmt);  while($row=$result->fetch_assoc()){    $dataList=$row;  }  mysqli_stmt_close($stmt);  return $dataList;}function removeRoleModulesByRoleId($con,$roleId){  $feedback = false;  $query = "DELETE FROM `rolemodules` WHERE roleId=?";  $stmt=mysqli_prepare($con,$query);  mysqli_stmt_bind_param($stmt,'i',$roleId);  if(mysqli_stmt_execute($stmt)){    $feedback = true;  }  $result = mysqli_stmt_get_result($stmt);  mysqli_stmt_close($stmt);  return $feedback;}function insertRoleModules($con,$roleId,$moduleId,$addDate,$addTime){  $feedback = false;  $query="INSERT INTO rolemodules (roleId,moduleId,addDate,addTime) VALUES (?,?,?,?)";  $stmt=mysqli_prepare($con,$query);  mysqli_stmt_bind_param($stmt,'iiss',$roleId,$moduleId,$addDate,$addTime);  if(mysqli_stmt_execute($stmt)){    $feedback = true;  }  mysqli_stmt_close($stmt);  return $feedback;}function updateUsage($con,$internal,$external,$staffCam,$supportCam,$clientas,$clientpasscol,$memberReg,$staffLoan,$location){	$query="UPDATE `organizationuse` SET `id`=1,`internal`=?,`external`=?,`staffcam`=?,`supportcam`=?,`clientas`=?, `clientpasscol`=?, `membership`=?, `staffloan`=?, location=?";	$stmt=mysqli_prepare($con,$query);	mysqli_stmt_bind_param($stmt,'iiiiiiiii',$internal,$external,$staffCam,$supportCam,$clientas,$clientpasscol,$memberReg,$staffLoan,$location);	if(mysqli_stmt_execute($stmt)){		$success=true;	}	return $success;}?>