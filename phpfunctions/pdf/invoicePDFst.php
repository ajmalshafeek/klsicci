<?php//use Spipu\Html2Pdf\Html2Pdf; //exabyte no support$config=parse_ini_file(__DIR__."/../../jsheetconfig.ini");if(!isset($_SESSION)){    session_name($config['sessionName']);    session_start();}require $_SERVER['DOCUMENT_ROOT'].$config['appRoot'].'/external/mPDF/vendor/autoload.php';require_once($_SERVER['DOCUMENT_ROOT'].$config['appRoot']."/phpfunctions/configuration.php");function generateInvoicePDF($myOrgName,$orgPhone,$orgFaxNo,$customerName,$attention,$customerAddress,$myOrgAddress,$quotationNumber,$quotationDate,$dueDate,$quotationTotalAmount,$itemList,$quotConfig,$footerContent,$ponumber,$pref,$discount,$mod,$quot_page,$quot_term,$quot_myring,$quot_quotationDate){    $config=parse_ini_file(__DIR__."/../../jsheetconfig.ini");    $html2pdf=new \Mpdf\Mpdf();    $table="";    $style='	<style>        table{            margin:10px;        }        table.quotation-org-Header{            border-collapse:collapse;        }        table.quotation-Header{        //		border-collapse:collapse;        }        .quotation-Header-Title{            text-align:center;            background-color:black;            color:white;            font-size:20px;        }        .quotation-Content{                    border-collapse:collapse;        }        .quotation-Content, .quotation-Header-Title, table.quotation-Header, table.quotation-org-Header{            width:550pt;        }            .myOrgName{            text-align:left;            width:40%;            font-weight:bold;            font-size:16px;        }        .myOrgAddress{        //width:27pt;            text-align:left;        }        .myOrgLogo{            width:60%;            height:100px;        /*border:1px solid red;*/            text-align: right;        }        .contact{            text-align:left;        }        .customerName{            width:50%;            font-weight:bold;            font-size:24px;        }        .meta-head{            border:0px solid black;            font-weight:bold;            padding: 5px;            text-align:left;            /*background-color:#eee;*/            font-size:15px;        }        .meta-body{            border:0px solid black;            padding: 5px;            text-align:right;        }        td{        //	border:1px solid black;        }        th{            border:1px solid black;        }        .th-No,.th-Date,.th-Discount,.th-Description,.th-UnitCost,.th-Quantity{            border:0px solid black;            border-bottom:1px solid black;            border-top:1px solid black;            padding: 5px;            font-size:10px;        }        .th-No{            width:15%;        }        .th-Date{            width:15%;        }        .th-Description{            width:30%;        }        .th-UnitCost{            width:12%;        }        .th-Quantity{            width:12%;            text-align:center;        }        .th-Discount{            width:16%        }        .td-No,.td-Date,.td-Discount,.td-Description,.td-UnitCost,.td-Quantity,{         //border-bottom:1px solid black;            padding: 10px;            border:0px solid black;        }        .td-No{            width:15%;            border-left:0px solid black;        }        .td-Date{            width:15%;        }        .td-Description{            width:30%;        }        .td-UnitCost{            width:12%;        }        .td-Quantity{            width:12%;            text-align:center;        }        .td-Discount{            width:16%;        }        .blank{        //border-right:1px solid black;        }        .footer-head-TOTAL{            padding: 10px;            font-weight:bold;            text-align:right;        }        .footer-body-TOTAL{            padding: 10px;        }        .page_Footer{            text-align:center;            font-weight:bold;        }        td{        //	border:1px solid black;        }        .footer-line{            border:0px solid black !important;            border-top:1px solid black !important;        }    </style>';    $quotTable="";    $myOrLogo="";    //$orgLogoSrc='https://'.$_SERVER['HTTP_HOST'].$config['appRoot'].'/resources/'.$_SESSION['orgLogo'].'.png';    $orgLogoSrc='./../resources/'.$_SESSION['orgLogo'].'.png';    if($quotConfig['isLogo']){        $LogoSrc='./../resources/'.$quotConfig['orgId'].'/myOrg/'.$quotConfig['logoName'].'.png';        if (@file_exists($LogoSrc)) {            $myOrLogo='<img style="height:100px;max-width:272pt" src="'.$LogoSrc.'" alt="logo" />';        }    } else {        if (@file_exists($orgLogoSrc)) {            //$myOrLogo='	<img  style="height:150px;max-width:500px"  src="'.$orgLogoSrc.'" alt="logo" />';            $myOrLogo = '	<img  style="height:100px;max-width:272pt"  src="' . $orgLogoSrc . '" alt="logo" />';       }        $pdfConf = getPdfConfiguration($_SESSION['orgId']);        if ($pdfConf['replaceLogo']) {            $myOrLogo = $pdfConf['headerNote'];        }    }    $quotTableOrgHeader='		<table class="quotation-org-Header">			<tbody>				<tr>					<td class="myOrgName" valign="bottom">						'.$myOrgName.'					</td>					<td class="myOrgLogo" rowspan="4" valign="bottom">					'.$myOrLogo.'					</td>				</tr>				<tr>					<td class="myOrgAddress" valign="top">						'.nl2br($myOrgAddress).'					</td>				</tr>				<tr>					<td class="contact" valign="top">						Phone No : '.$orgPhone.'					</td>				</tr>				<tr>					<td class="contact" valign="top">						Fax No. : '.$orgFaxNo.'					</td>				</tr>			</tbody>		</table>';    $quotTableHeader='	<table  class="quotation-Header">	<tbody>		<thead>			<tr>			<th colspan="4" class="quotation-Header-Title">				STATEMENT OF ACCOUNT			</th>			</tr>			<tr>				<th style="border:none">&nbsp;				</th>			</tr>		</thead>		<tr>			<td rowspan="3" valign="top" > <b>TO : </b>			</td>			<td  class="customerName">				'.$customerName.',			</td>			<td class="meta-head" colspan="2" rowspan="2"  align="right" valign="bottom">';				        $quotTableHeader=$quotTableHeader.'        <table border="0px" cellpadding="0px" cellspacing="0px"><tr>                    <td class="meta-head">    Statement Date:			        </td>			        <td class="meta-body">';                        $quotationDate=date_create($quot_quotationDate);                        $quotTableHeader.=date_format($quotationDate,"d/m/Y").'			        </td>                    </tr>                                        <tr >						<td class="meta-head">    Terms:						</td>						<td class="meta-body">';                                 $quotTableHeader.=$quot_term.'						</td>					</tr>';            $quotTableHeader.='<tr>                                <td class="meta-head">    Page:                                </td>                                <td class="meta-body">                                    '.$quot_page.'                                </td>                            </tr></table>';            $quotTableHeader.='</td>			</tr>			<tr class="meta">			    <td>			    '.nl2br($customerAddress).'';        $quotTableHeader.='</td></tr>        </tbody>        </table>        ';        $quotTableContent='        <table class="quotation-Content">			<tr>				<th class="th-No">					Date				</th>				<th class="th-Date">					Inv. Ref. No				</th>				<th class="th-Description">					Description				</th>				<th class="th-UnitCost">					Debit				</th>				<th class="th-Quantity">					Credit				</th>				<th class="th-Discount">					Balance				</th>			</tr>		<tbody>		';    $quotItemList='';    foreach($itemList as $item){        $itemDate=$item['itemDate'];        $itemRef=$item['itemRef'];        $itemDescription=$item['itemDescription'];        $itemCredit=$item['itemCredit'];        $itemDebit=$item['itemDebit'];        $itemPrice=$item['itemPrice'];        $quotItemList.='			<tr>				<td class="td-No" valign="top">				'.$itemDate.'				</td>			<td class="td-Date" valign="top">				'.$itemRef.'				</td>				<td class="td-Description" valign="top">				'.nl2br($itemDescription).'				</td>				<td class="td-UnitCost" valign="top">				'.$itemDebit.'				</td>				<td class="td-Quantity" valign="top">				'.$itemCredit.'				</td>				<td class="td-Discount" valign="top">				'.$itemPrice.'				</td>			</tr>			';    }    $quotTableContent.=$quotItemList;    $stamp="";    if($quotConfig['isStamp']){        $stampSrc='./../resources/'.$quotConfig['orgId'].'/myOrg/'.$quotConfig['stampName'].'.png';        //$stampSrc='https://'.$_SERVER['HTTP_HOST'].$config['appRoot'].'/resources/'.$quotConfig['orgId'].'/myOrg/'.$quotConfig['stampName'].'.png';        if (@file_exists($stampSrc)) {            $stamp='<img style="height:100px;max-width:100px" src="'.$stampSrc.'" alt="logo" />';        }    }    $sign="";    if($quotConfig['isSign']){        $signSrc='./../resources/'.$quotConfig['orgId'].'/myOrg/'.$quotConfig['signName'].'.png';        //$stampSrc='https://'.$_SERVER['HTTP_HOST'].$config['appRoot'].'/resources/'.$quotConfig['orgId'].'/myOrg/'.$quotConfig['stampName'].'.png';        if (@file_exists($signSrc)) {            $sign='<img style="max-width:100px" src="'.$signSrc.'" alt="logo" />';        }    }    $extraNote=$footerContent;    $classline="footer-line";    if(floatval($discount)>0){        $quotTableContent.='			<tr>				<td colspan="3"  class="blank '.$classline.'" >				</td>				<td colspan="2" class="footer-head-TOTAL '.$classline.'" >					DISCOUNT:				</td>				<td class="footer-body-TOTAL footer-line '.$classline.'" >					RM '.$discount.'				</td>			</tr>';        $classline="";    }    $quotTableContent.='			<tr>				<td colspan="3"  class="blank  '.$classline.'">				 RINGGIT MALAYSIA: '.$quot_myring.'				</td>				<td colspan="2" class="footer-head-TOTAL  '.$classline.'" >					TOTAL:				</td>				<td class="footer-body-TOTAL  '.$classline.'" >					'.$quotationTotalAmount.'				</td>			</tr>			<tr>				<td class="blank" colspan="8" style="padding:10px;">				<br/>				<br/>				<p>We shall be grateful if you will let us have payment as soon as possible. Any discrepancy in this statement must be reported to us in writing within 7 days.</p>				<br/>				 <strong>Bank Details as Below :</strong>				<br/>				 <strong>Account Name : SMU LOGISTICS SERVICES (M) SDN.BHD</strong><br/>				 <strong>Name Of Bank : Public Bank</strong><br/>				 <strong>Bank Account Number : 3227210229</strong><br/>                  				</td>			</tr>			<tr>				<td class="blank" colspan="3" style="padding:10px;font-weight:bold;text-align:left;">					PREPARED BY					<br/>					'.$stamp.'<hr/>					<br/>					'.$sign.'					<br/>					'.$attention.'					<br/>					'.$myOrgName.'				</td>				<td class="blank" colspan="4"  >				</td>			</tr>		</tbody>	</table>	<br/>';    /*<page_footer class="page_Footer">        This is computer generated document no signature required    </page_footer>    removed as html2pdf not supported by exabyte    */    $html2pdf->SetFooter('|This is computer generated document no signature required|');    $quotTable.=$style;    $quotTable.=$quotTableOrgHeader;    $quotTable.=$quotTableHeader;    $quotTable.=$quotTableContent;    $html2pdf->writeHTML($quotTable);    //$html2pdf->output();    return $html2pdf;}function UR_exists($url){    $headers=get_headers($url);    return stripos($headers[0],"200 OK")?true:false;}?>